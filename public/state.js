export const COLLECTIONS = {
  users: "users",
  schools: "schools",
  events: "events",
  schedule: "schedule",
  assignments: "assignments",
  submissions: "submissions",
  ensembles: "ensembles",
  entries: "entries",
};

export const FIELDS = {
  users: {
    role: "role",
    schoolId: "schoolId",
    roles: "roles",
    email: "email",
  },
  schools: {
    directors: "directors",
  },
    events: {
      isActive: "isActive",
      name: "name",
      startAt: "startAt",
      endAt: "endAt",
      timezone: "timezone",
    },
  schedule: {
    performanceAt: "performanceAt",
    schoolId: "schoolId",
    ensembleId: "ensembleId",
  },
  submissions: {
    status: "status",
    locked: "locked",
    judgeUid: "judgeUid",
    judgeName: "judgeName",
    judgeEmail: "judgeEmail",
    judgeTitle: "judgeTitle",
    judgeAffiliation: "judgeAffiliation",
    schoolId: "schoolId",
    eventId: "eventId",
    ensembleId: "ensembleId",
    judgePosition: "judgePosition",
    formType: "formType",
    audioUrl: "audioUrl",
    audioDurationSec: "audioDurationSec",
    transcript: "transcript",
    captions: "captions",
    captionScoreTotal: "captionScoreTotal",
    computedFinalRatingJudge: "computedFinalRatingJudge",
    computedFinalRatingLabel: "computedFinalRatingLabel",
    createdAt: "createdAt",
    submittedAt: "submittedAt",
    updatedAt: "updatedAt",
  },
  entries: {
    performanceGrade: "performanceGrade",
  },
};

export const STATUSES = {
  submitted: "submitted",
  released: "released",
};

export const JUDGE_POSITIONS = {
  stage1: "stage1",
  stage2: "stage2",
  stage3: "stage3",
  sight: "sight",
};

export const JUDGE_POSITION_LABELS = {
  stage1: "Stage 1",
  stage2: "Stage 2",
  stage3: "Stage 3",
  sight: "Sight",
};

export const FORM_TYPES = {
  stage: "stage",
  sight: "sight",
};

export const REPERTOIRE_FIELDS = [
  { key: "march", label: "March" },
  { key: "selection1", label: "MPA Selection #1" },
  { key: "selection2", label: "MPA Selection #2" },
];

export const STANDARD_INSTRUMENTS = [
  { key: "flute", label: "Flute" },
  { key: "oboe", label: "Oboe" },
  { key: "bassoon", label: "Bassoon" },
  { key: "clarinet", label: "Clarinet" },
  { key: "bassClarinet", label: "Bass Clarinet" },
  { key: "altoSax", label: "Alto Sax" },
  { key: "tenorSax", label: "Tenor Sax" },
  { key: "bariSax", label: "Bari Sax" },
  { key: "trumpetCornet", label: "Trumpet/Cornet" },
  { key: "horn", label: "Horn" },
  { key: "trombone", label: "Trombone" },
  { key: "euphoniumBaritone", label: "Euphonium/Baritone" },
  { key: "tuba", label: "Tuba" },
];

export const PERCUSSION_OPTIONS = [
  '4 Timpani (23", 26", 29", 32")',
  "Bass Drum",
  "Tam-Tam/Gong",
  "Marimba",
  "Vibraphone",
  "Xylophone",
  "Glockenspiel/Bells",
];

export const MAX_RULE3C_ENTRIES = 5;
export const SEATING_ROWS = 6;

export const CAPTION_TEMPLATES = {
  stage: [
    { key: "toneQuality", label: "Tone Quality" },
    { key: "intonation", label: "Intonation" },
    { key: "rhythm", label: "Rhythm & Precision" },
    { key: "balanceBlend", label: "Balance & Blend" },
    { key: "expression", label: "Expression" },
    { key: "technique", label: "Technique" },
    { key: "musicianship", label: "Musicianship" },
  ],
  sight: [
    { key: "accuracy", label: "Accuracy" },
    { key: "rhythm", label: "Rhythm & Pulse" },
    { key: "toneQuality", label: "Tone Quality" },
    { key: "balanceBlend", label: "Balance & Blend" },
    { key: "expression", label: "Expression" },
    { key: "musicianship", label: "Musicianship" },
    { key: "sightReading", label: "Sight Reading Fundamentals" },
  ],
};

export const GRADE_VALUES = {
  A: 1,
  B: 2,
  C: 3,
  D: 4,
  F: 5,
};

export const els = {
  authStatus: document.getElementById("authStatus"),
  signInBtn: document.getElementById("signInBtn"),
  headerAuthActions: document.getElementById("headerAuthActions"),
  authModal: document.getElementById("authModal"),
  authModalBackdrop: document.getElementById("authModalBackdrop"),
  authModalClose: document.getElementById("authModalClose"),
  sessionExpiredModal: document.getElementById("sessionExpiredModal"),
  sessionExpiredBackdrop: document.getElementById("sessionExpiredBackdrop"),
  sessionExpiredSignInBtn: document.getElementById("sessionExpiredSignInBtn"),
  offlineBanner: document.getElementById("offlineBanner"),
  modalAuthActions: document.getElementById("modalAuthActions"),
  authSignInView: document.getElementById("authSignInView"),
  authDirectorView: document.getElementById("authDirectorView"),
  authAccountView: document.getElementById("authAccountView"),
  accountSummary: document.getElementById("accountSummary"),
  provisioningNotice: document.getElementById("provisioningNotice"),
  tabButtons: Array.from(document.querySelectorAll(".tab")),
  tabLockHint: document.getElementById("tabLockHint"),
  adminStatusBadge: document.getElementById("adminStatusBadge"),
  judgeStatusBadge: document.getElementById("judgeStatusBadge"),
  roleHint: document.getElementById("roleHint"),
  emailForm: document.getElementById("emailForm"),
  emailInput: document.getElementById("emailInput"),
  passwordInput: document.getElementById("passwordInput"),
  anonymousBtn: document.getElementById("anonymousBtn"),
  forgotPasswordBtn: document.getElementById("forgotPasswordBtn"),
  signOutBtn: document.getElementById("signOutBtn"),
  showDirectorSignupBtn: document.getElementById("showDirectorSignupBtn"),
  backToSignInBtn: document.getElementById("backToSignInBtn"),
  authSuccess: document.getElementById("authSuccess"),
  adminCard: document.getElementById("adminCard"),
  judgeCard: document.getElementById("judgeCard"),
  adminEmpty: document.getElementById("adminEmpty"),
  judgeEmpty: document.getElementById("judgeEmpty"),
  directorEmpty: document.getElementById("directorEmpty"),
  assignmentsError: document.getElementById("assignmentsError"),
  eventNameInput: document.getElementById("eventNameInput"),
  eventStartAtInput: document.getElementById("eventStartAtInput"),
  eventEndAtInput: document.getElementById("eventEndAtInput"),
  createEventBtn: document.getElementById("createEventBtn"),
  eventList: document.getElementById("eventList"),
  scheduleForm: document.getElementById("scheduleForm"),
  performanceAtInput: document.getElementById("performanceAtInput"),
  scheduleSchoolSelect: document.getElementById("scheduleSchoolSelect"),
  scheduleEnsembleSelect: document.getElementById("scheduleEnsembleSelect"),
  scheduleEnsembleHint: document.getElementById("scheduleEnsembleHint"),
  scheduleSubmitBtn: document.getElementById("scheduleSubmitBtn"),
  scheduleList: document.getElementById("scheduleList"),
  assignmentsForm: document.getElementById("assignmentsForm"),
  stage1JudgeSelect: document.getElementById("stage1JudgeSelect"),
  stage2JudgeSelect: document.getElementById("stage2JudgeSelect"),
  stage3JudgeSelect: document.getElementById("stage3JudgeSelect"),
  sightJudgeSelect: document.getElementById("sightJudgeSelect"),
  packetView: document.getElementById("packetView"),
  schoolForm: document.getElementById("schoolForm"),
  schoolIdCreateInput: document.getElementById("schoolIdCreateInput"),
  schoolNameCreateInput: document.getElementById("schoolNameCreateInput"),
  schoolBulkInput: document.getElementById("schoolBulkInput"),
  schoolBulkBtn: document.getElementById("schoolBulkBtn"),
  schoolResult: document.getElementById("schoolResult"),
  activeEventDisplay: document.getElementById("activeEventDisplay"),
  judgePositionDisplay: document.getElementById("judgePositionDisplay"),
  judgeAssignmentDetail: document.getElementById("judgeAssignmentDetail"),
  rosterList: document.getElementById("rosterList"),
  adminReadinessChecklist: document.getElementById("adminReadinessChecklist"),
  judgeReadinessChecklist: document.getElementById("judgeReadinessChecklist"),
  judgeTestReadinessChecklist: document.getElementById("judgeTestReadinessChecklist"),
  submissionHint: document.getElementById("submissionHint"),
  submissionSubmittedBadge: document.getElementById("submissionSubmittedBadge"),
  submissionSubmittedAt: document.getElementById("submissionSubmittedAt"),
  judgeEntrySummary: document.getElementById("judgeEntrySummary"),
  submissionForm: document.getElementById("submissionForm"),
  recordBtn: document.getElementById("recordBtn"),
  stopBtn: document.getElementById("stopBtn"),
  recordingStatus: document.getElementById("recordingStatus"),
  playback: document.getElementById("playback"),
  transcriptInput: document.getElementById("transcriptInput"),
  transcribeBtn: document.getElementById("transcribeBtn"),
  draftBtn: document.getElementById("draftBtn"),
  overwriteCaptionsToggle: document.getElementById("overwriteCaptionsToggle"),
  draftStatus: document.getElementById("draftStatus"),
  captionForm: document.getElementById("captionForm"),
  captionTotal: document.getElementById("captionTotal"),
  finalRating: document.getElementById("finalRating"),
  submitBtn: document.getElementById("submitBtn"),
  judgeTestPanel: document.getElementById("judgeTestPanel"),
  testModeToggle: document.getElementById("testModeToggle"),
  testModeContent: document.getElementById("testModeContent"),
  testFormTypeSelect: document.getElementById("testFormTypeSelect"),
  testRecordBtn: document.getElementById("testRecordBtn"),
  testStopBtn: document.getElementById("testStopBtn"),
  testRecordingStatus: document.getElementById("testRecordingStatus"),
  testPlayback: document.getElementById("testPlayback"),
  testTranscriptInput: document.getElementById("testTranscriptInput"),
  testTranscribeBtn: document.getElementById("testTranscribeBtn"),
  testDraftBtn: document.getElementById("testDraftBtn"),
  testClearBtn: document.getElementById("testClearBtn"),
  testCaptionForm: document.getElementById("testCaptionForm"),
  testCaptionTotal: document.getElementById("testCaptionTotal"),
  testFinalRating: document.getElementById("testFinalRating"),
  judgeTestBadge: document.getElementById("judgeTestBadge"),
  directorCard: document.getElementById("directorCard"),
  directorHint: document.getElementById("directorHint"),
  directorPackets: document.getElementById("directorPackets"),
  directorEntryStatusBadge: document.getElementById("directorEntryStatusBadge"),
  directorSummaryName: document.getElementById("directorSummaryName"),
  directorSummaryEmail: document.getElementById("directorSummaryEmail"),
  directorSummarySchool: document.getElementById("directorSummarySchool"),
  directorMainStack: document.getElementById("directorMainStack"),
  directorProfileToggleBtn: document.getElementById("directorProfileToggleBtn"),
  directorChecklist: document.getElementById("directorChecklist"),
  directorProfileModal: document.getElementById("directorProfileModal"),
  directorProfileBackdrop: document.getElementById("directorProfileBackdrop"),
  directorProfileClose: document.getElementById("directorProfileClose"),
  directorProfileSaveBtn: document.getElementById("directorProfileSaveBtn"),
  directorProfileCancelBtn: document.getElementById("directorProfileCancelBtn"),
  directorProfileForm: document.getElementById("directorProfileForm"),
  directorProfileNameInput: document.getElementById("directorProfileNameInput"),
  directorProfileNafmeNumberInput: document.getElementById("directorProfileNafmeNumberInput"),
  directorProfileNafmeExpInput: document.getElementById("directorProfileNafmeExpInput"),
  directorProfileCardInput: document.getElementById("directorProfileCardInput"),
  directorProfileCardStatus: document.getElementById("directorProfileCardStatus"),
  directorProfileCardPreview: document.getElementById("directorProfileCardPreview"),
  directorSchoolHeader: document.getElementById("directorSchoolHeader"),
  directorSchoolName: document.getElementById("directorSchoolName"),
  directorAttachGate: document.getElementById("directorAttachGate"),
  directorAttachControls: document.getElementById("directorAttachControls"),
  directorAttachSelect: document.getElementById("directorAttachSelect"),
  directorAttachBtn: document.getElementById("directorAttachBtn"),
  directorDetachControls: document.getElementById("directorDetachControls"),
  directorDetachBtn: document.getElementById("directorDetachBtn"),
  directorEnsemblesSection: document.getElementById("directorEnsemblesSection"),
  directorEnsembleForm: document.getElementById("directorEnsembleForm"),
  directorEnsembleNameInput: document.getElementById("directorEnsembleNameInput"),
  directorShowEnsembleFormBtn: document.getElementById("directorShowEnsembleFormBtn"),
  directorEnsembleCancelBtn: document.getElementById("directorEnsembleCancelBtn"),
  directorEnsembleError: document.getElementById("directorEnsembleError"),
  directorEnsembleList: document.getElementById("directorEnsembleList"),
  directorActiveEnsembleName: document.getElementById("directorActiveEnsembleName"),
  directorEventSelect: document.getElementById("directorEventSelect"),
  directorEventMeta: document.getElementById("directorEventMeta"),
  directorEventName: document.getElementById("directorEventName"),
  directorEventDetail: document.getElementById("directorEventDetail"),
  directorChangeEventBtn: document.getElementById("directorChangeEventBtn"),
  directorEventPicker: document.getElementById("directorEventPicker"),
  directorScheduleBtn: document.getElementById("directorScheduleBtn"),
  directorEntryPanel: document.getElementById("directorEntryPanel"),
  directorEntryForm: document.getElementById("directorEntryForm"),
  directorEntryStatus: document.getElementById("directorEntryStatus"),
  directorSaveStatus: document.getElementById("directorSaveStatus"),
  directorAutosaveIndicator: document.getElementById("directorAutosaveIndicator"),
  directorEntryHint: document.getElementById("directorEntryHint"),
  directorPerformanceGradeInput: document.getElementById("directorPerformanceGradeInput"),
  performanceGradeError: document.getElementById("performanceGradeError"),
  repertoireFields: document.getElementById("repertoireFields"),
  saveRepertoireBtn: document.getElementById("saveRepertoireBtn"),
  saveRepertoireStatus: document.getElementById("saveRepertoireStatus"),
  instrumentationStandard: document.getElementById("instrumentationStandard"),
  instrumentationTotalPercussion: document.getElementById("instrumentationTotalPercussion"),
  instrumentationNonStandard: document.getElementById("instrumentationNonStandard"),
  instrumentationNonStandardAddBtn: document.getElementById("instrumentationNonStandardAddBtn"),
  otherInstrumentationNotesInput: document.getElementById("otherInstrumentationNotesInput"),
  saveInstrumentationBtn: document.getElementById("saveInstrumentationBtn"),
  saveInstrumentationStatus: document.getElementById("saveInstrumentationStatus"),
  saveNonStandardBtn: document.getElementById("saveNonStandardBtn"),
  saveNonStandardStatus: document.getElementById("saveNonStandardStatus"),
  rule3cRows: document.getElementById("rule3cRows"),
  rule3cNotesInput: document.getElementById("rule3cNotesInput"),
  saveRule3cBtn: document.getElementById("saveRule3cBtn"),
  saveRule3cStatus: document.getElementById("saveRule3cStatus"),
  seatingRows: document.getElementById("seatingRows"),
  seatingNotesInput: document.getElementById("seatingNotesInput"),
  saveSeatingBtn: document.getElementById("saveSeatingBtn"),
  saveSeatingStatus: document.getElementById("saveSeatingStatus"),
  percussionOptions: document.getElementById("percussionOptions"),
  percussionNotesInput: document.getElementById("percussionNotesInput"),
  savePercussionBtn: document.getElementById("savePercussionBtn"),
  savePercussionStatus: document.getElementById("savePercussionStatus"),
  lunchPepperoniInput: document.getElementById("lunchPepperoniInput"),
  lunchCheeseInput: document.getElementById("lunchCheeseInput"),
  lunchNotesInput: document.getElementById("lunchNotesInput"),
  saveLunchBtn: document.getElementById("saveLunchBtn"),
  saveLunchStatus: document.getElementById("saveLunchStatus"),
  directorEntryReadyBtn: document.getElementById("directorEntryReadyBtn"),
  directorEntryUndoReadyBtn: document.getElementById("directorEntryUndoReadyBtn"),
  directorEmailInput: document.getElementById("directorEmailInput"),
  directorPasswordInput: document.getElementById("directorPasswordInput"),
  directorSchoolSelect: document.getElementById("directorSchoolSelect"),
  directorSignupBtn: document.getElementById("directorSignupBtn"),
  provisionForm: document.getElementById("provisionForm"),
  provisionEmailInput: document.getElementById("provisionEmailInput"),
  provisionNameInput: document.getElementById("provisionNameInput"),
  provisionRoleSelect: document.getElementById("provisionRoleSelect"),
  provisionSchoolSelect: document.getElementById("provisionSchoolSelect"),
  provisionTempPasswordInput: document.getElementById("provisionTempPasswordInput"),
  provisionResult: document.getElementById("provisionResult"),
  eventDetailPage: document.getElementById("eventDetailPage"),
  eventDetailTitle: document.getElementById("eventDetailTitle"),
  eventDetailMeta: document.getElementById("eventDetailMeta"),
  eventDetailBackBtn: document.getElementById("eventDetailBackBtn"),
};

export const state = {
  auth: {
    currentUser: null,
    userProfile: null,
    sessionExpiredLocked: false,
  },
  event: {
    active: null,
    list: [],
    rosterEntries: [],
    readyEnsembles: new Set(),
    assignments: null,
  },
  judge: {
    position: null,
    formType: null,
    selectedRosterEntry: null,
    audioBlob: null,
    audioDurationSec: 0,
    currentSubmissionHasAudio: false,
    transcriptText: "",
    captions: {},
    mediaRecorder: null,
    recordingChunks: [],
    isTestMode: false,
    testAudioBlob: null,
    testRecordingChunks: [],
    testMediaRecorder: null,
    testCaptions: {},
    testFormType: "stage",
    previousFormType: null,
    testTranscriptText: "",
    draftDirty: false,
    draftVersion: 0,
    autosaveInFlight: false,
    draftSubmissionKey: null,
  },
  director: {
    selectedEventId: null,
    selectedEnsembleId: null,
    entryDraft: null,
    entryExists: false,
    entryRef: null,
    entrySaveInFlight: false,
    ensemblesCache: [],
    nameCache: new Map(),
    dirtySections: new Set(),
    draftVersion: 0,
    autosaveInFlight: false,
    autosaveIndicatorTimeout: null,
  },
  admin: {
    schoolsList: [],
  },
  subscriptions: {
    events: null,
    activeEvent: null,
    roster: null,
    readyEntries: null,
    assignments: null,
    directorPackets: null,
    schools: null,
    directorSchool: null,
    directorEnsembles: null,
    directorEntry: null,
    scheduleEnsembles: null,
    judges: null,
    judgeSubmission: null,
    entryStatusMap: new Map(),
  },
  app: {
    autosaveIntervalId: null,
    currentTab: null,
    isOffline: false,
    tabsBound: false,
    lastFocusedElement: null,
    authModalKeyHandler: null,
  },
};

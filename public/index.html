<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>MPA Judge</title>
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body>
    <header class="app-header">
      <div class="header-brand">
        <img src="/ncba-logo.png" alt="North Carolina Bandmasters Association logo" class="site-logo" />
        <div>
          <p class="eyebrow">North Carolina Bandmasters Association</p>
          <h1>Eastern District MPA</h1>
          <p class="lede">South Site - Ashley High School</p>
        </div>
      </div>
      <div class="auth-controls">
        <div class="note" id="authSuccess" hidden></div>
        <div class="row">
          <button type="button" id="signInBtn" class="btn--lg">Sign In / Create Account</button>
          <div id="headerAuthActions"></div>
        </div>
      </div>
    </header>

    <main class="main">
      <div class="notice offline-banner is-hidden" id="offlineBanner" role="status" aria-live="polite">
        Offline: submissions are disabled until you reconnect.
      </div>
      <div class="notice notice--info" id="provisioningNotice" hidden role="status" aria-live="polite"></div>
      <nav class="tabs" role="tablist" aria-label="Role views">
        <button class="tab" type="button" id="adminTab" role="tab" aria-controls="adminCard" data-tab="admin" aria-selected="false">
          Admin
        </button>
        <button class="tab" type="button" id="judgeTab" role="tab" aria-controls="judgeCard" data-tab="judge" aria-selected="false">
          Judge
        </button>
        <button class="tab" type="button" id="directorTab" role="tab" aria-controls="directorCard" data-tab="director" aria-selected="false">
          Director
        </button>
      </nav>
      <div class="hint" id="tabLockHint"></div>

      <section class="card" id="adminCard" role="tabpanel" aria-labelledby="adminTab">
        <div class="tab-header">
          <div>
            <h2>Admin Tools</h2>
            <div class="tab-subtitle">Set up events, assignments, and schedules.</div>
          </div>
          <div class="tab-header-actions">
            <span class="badge" id="adminStatusBadge">No active event</span>
          </div>
        </div>
        <div class="empty" id="adminEmpty">No active event.</div>
        <div class="stack">
          <div class="panel" id="adminReadinessPanel">
            <div class="readiness-header">
              <h3>Event Readiness</h3>
              <span class="pill">Draft</span>
            </div>

            <div class="readiness-summary">
              <div class="readiness-main">
                <div class="readiness-title"></div>
                <div class="readiness-meta"></div>
              </div>

              <div class="readiness-actions"></div>
            </div>

            <div class="progress" aria-hidden="true">
              <div class="progress-bar" style="width: 0%"></div>
            </div>

            <details class="accordion-card readiness-details" id="adminReadinessDetails">
              <summary>
                <span>View details</span>
                <span class="muted readiness-hint"> </span>
              </summary>
              <ul id="adminReadinessChecklist" class="list list--compact"></ul>
            </details>
          </div>

          <div class="panel">
            <h3>Event Setup</h3>
            <div class="stack">
              <div>
                <h4>Active Event</h4>
                <div class="row">
                  <input type="text" id="eventNameInput" placeholder="New event name" />
                  <input type="datetime-local" id="eventStartAtInput" />
                  <input type="datetime-local" id="eventEndAtInput" />
                  <button type="button" id="createEventBtn" class="btn--lg">Create Event</button>
                </div>
                <div class="hint">Delete is blocked once results are released.</div>
                <ul id="eventList" class="list"></ul>
              </div>

              <div>
                <h4>Judge Assignments</h4>
                <div class="note">
                  Current user: <span id="currentUidDisplay">Signed out</span>
                </div>
                <div class="row">
                  <button type="button" id="copyUidBtn" class="ghost" disabled>
                    UID Hidden
                  </button>
                </div>
                <div class="error" id="assignmentsError"></div>
                <form id="assignmentsForm" class="stack">
                  <label>
                    Stage 1 Judge
                    <select id="stage1JudgeSelect"></select>
                  </label>
                  <label>
                    Stage 2 Judge
                    <select id="stage2JudgeSelect"></select>
                  </label>
                  <label>
                    Stage 3 Judge
                    <select id="stage3JudgeSelect"></select>
                  </label>
                  <label>
                    Sight Judge
                    <select id="sightJudgeSelect"></select>
                  </label>
                  <button type="submit">Save Assignments</button>
                </form>
              </div>

              <div>
                <h4>Add Schedule Entry</h4>
                <p class="hint">Active event schedule only.</p>
                <form id="scheduleForm" class="stack">
                  <label>
                    Performance At
                    <input type="datetime-local" id="performanceAtInput" required />
                  </label>
                  <label>
                    School
                    <select id="scheduleSchoolSelect" required></select>
                  </label>
                  <label>
                    Ensemble
                    <select id="scheduleEnsembleSelect" required></select>
                  </label>
                  <div class="hint" id="scheduleEnsembleHint"></div>
                  <button type="submit" id="scheduleSubmitBtn">Add Schedule Entry</button>
                </form>
              </div>
            </div>
          </div>

          <div class="panel">
            <h3>Event Management</h3>
            <div class="stack">
              <div>
                <h4>Schedule (Chronological)</h4>
                <ul id="scheduleList" class="list"></ul>
              </div>
              <div>
                <h4>Packet View</h4>
                <p class="hint">Use View Packet on a schedule row to expand details.</p>
                <div id="packetView" class="packet"></div>
              </div>
            </div>
          </div>

          <div class="panel">
            <h3>Directory</h3>
            <div class="stack">
              <div>
                <h4>Schools Directory</h4>
                <p class="hint">Seed schools for director selection.</p>
                <form id="schoolForm" class="stack">
                  <label>
                    School ID (slug)
                    <input type="text" id="schoolIdCreateInput" placeholder="school_001" required />
                  </label>
                  <label>
                    School Name
                    <input type="text" id="schoolNameCreateInput" required />
                  </label>
                  <button type="submit">Add School</button>
                </form>
                <label>
                  Bulk import (one per line: schoolId,School Name)
                  <textarea id="schoolBulkInput" rows="4"></textarea>
                </label>
                <button type="button" id="schoolBulkBtn" class="ghost">Import Bulk</button>
                <div class="note" id="schoolResult"></div>
              </div>
            </div>
          </div>

          <div class="panel">
            <h3>Users</h3>
            <div class="stack">
              <div>
                <h4>Provision User</h4>
                <p class="hint">
                  Admin-only. Creates an Auth user (email/password) and writes
                  users/{uid}. Share the temporary password securely.
                </p>
                <form id="provisionForm" class="stack">
                  <label>
                    Email
                    <input type="email" id="provisionEmailInput" required />
                  </label>
                  <label>
                    Name
                    <input type="text" id="provisionNameInput" placeholder="Optional for directors" />
                  </label>
                  <label>
                    Role
                    <select id="provisionRoleSelect" required>
                      <option value="judge">judge</option>
                      <option value="director">director</option>
                    </select>
                  </label>
                  <label>
                    School (optional, director only)
                    <select id="provisionSchoolSelect"></select>
                  </label>
                  <label>
                    Temporary Password (optional)
                    <input type="text" id="provisionTempPasswordInput" placeholder="Leave blank to auto-generate" />
                  </label>
                  <button type="submit">Provision User</button>
                </form>
                <div class="note" id="provisionResult"></div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="card" id="judgeCard" role="tabpanel" aria-labelledby="judgeTab">
        <div class="tab-header">
          <div>
            <h2>Judge Console</h2>
            <div class="tab-subtitle">Record, transcribe, score, and submit.</div>
          </div>
          <div class="tab-header-actions">
            <span class="badge" id="judgeStatusBadge">No assignment</span>
            <span class="badge is-hidden" id="judgeTestBadge">TEST MODE</span>
          </div>
        </div>
        <div class="empty" id="judgeEmpty">No active event or assignment.</div>
        <div class="stack">
          <div>
            <h3>Active Event</h3>
            <div id="activeEventDisplay" class="note">No active event.</div>
            <div id="judgePositionDisplay" class="note"></div>
            <div id="judgeAssignmentDetail" class="note"></div>
          </div>

          <div>
            <h3>Roster</h3>
            <input type="search" id="rosterSearch" placeholder="Search roster" />
            <ul id="rosterList" class="list"></ul>
          </div>

          <div>
            <h3>Submission</h3>
            <div class="panel" id="judgeReadinessPanel">
              <div class="readiness-header">
                <h3>Submission Readiness</h3>
                <span class="pill">Draft</span>
              </div>

              <div class="readiness-summary">
                <div class="readiness-main">
                  <div class="readiness-title"></div>
                  <div class="readiness-meta"></div>
                </div>

                <div class="readiness-actions"></div>
              </div>

              <div class="progress" aria-hidden="true">
                <div class="progress-bar" style="width: 0%"></div>
              </div>

              <details class="accordion-card readiness-details" id="judgeReadinessDetails">
                <summary>
                  <span>View details</span>
                  <span class="muted readiness-hint"> </span>
                </summary>
                <ul id="judgeReadinessChecklist" class="list list--compact"></ul>
              </details>
            </div>
            <div class="row">
              <div class="note" id="submissionHint">Select an ensemble to begin.</div>
              <span class="badge is-hidden" id="submissionSubmittedBadge">Submitted</span>
            </div>
            <div class="note" id="submissionSubmittedAt"></div>
            <div class="note" id="judgeEntrySummary"></div>
            <form id="submissionForm" class="stack" data-mode="live">
              <div class="step-heading">
                <span class="badge">Step 1</span>
                <strong>Record</strong>
              </div>
              <label>
                Recording
                <div class="row">
                  <button type="button" id="recordBtn" class="btn--secondary">Record</button>
                  <button type="button" id="stopBtn" class="btn--secondary" disabled>Stop</button>
                  <span id="recordingStatus" class="hint"></span>
                </div>
                <audio id="playback" controls class="audio"></audio>
              </label>
              <div class="step-heading">
                <span class="badge">Step 2</span>
                <strong>Transcribe</strong>
              </div>
              <label>
                Transcript
                <textarea id="transcriptInput" rows="4"></textarea>
              </label>
              <div class="row">
                <button type="button" id="transcribeBtn" class="ghost btn--secondary" disabled>
                  Transcribe Audio
                </button>
              </div>
              <div class="step-heading">
                <span class="badge">Step 3</span>
                <strong>Captions</strong>
              </div>
              <div class="stack">
                <div class="row">
                  <button type="button" id="draftBtn" class="btn--secondary">Draft Captions from Transcript</button>
                  <label class="row">
                    <input type="checkbox" id="overwriteCaptionsToggle" />
                    Overwrite existing captions
                  </label>
                </div>
                <div class="hint" id="draftStatus"></div>
              </div>
              <div id="captionForm" class="stack"></div>
              <div class="row">
                <div class="note">Caption Total: <span id="captionTotal">0</span></div>
                <div class="note">Final Rating: <span id="finalRating">N/A</span></div>
              </div>
              <div class="step-heading">
                <span class="badge">Step 4</span>
                <strong>Submit</strong>
              </div>
              <button type="submit" id="submitBtn" class="btn--lg">Submit</button>
            </form>
          </div>

          <div class="panel" id="judgeTestPanel">
            <div class="row">
              <strong>TEST MODE</strong>
              <span class="badge">Nothing is saved</span>
              <button type="button" id="testModeToggle" class="ghost">
                Enter Test Mode
              </button>
            </div>
            <div class="stack is-hidden" id="testModeContent">
              <div class="panel" id="judgeTestReadinessPanel">
                <div class="readiness-header">
                  <h3>Test Readiness</h3>
                  <span class="pill">Draft</span>
                </div>

                <div class="readiness-summary">
                  <div class="readiness-main">
                    <div class="readiness-title"></div>
                    <div class="readiness-meta"></div>
                  </div>

                  <div class="readiness-actions"></div>
                </div>

                <div class="progress" aria-hidden="true">
                  <div class="progress-bar" style="width: 0%"></div>
                </div>

                <details class="accordion-card readiness-details" id="judgeTestReadinessDetails">
                  <summary>
                    <span>View details</span>
                    <span class="muted readiness-hint"> </span>
                  </summary>
                  <ul id="judgeTestReadinessChecklist" class="list list--compact"></ul>
                </details>
              </div>
              <label>
                Form Type
                <select id="testFormTypeSelect" disabled>
                  <option value="stage">Stage</option>
                  <option value="sight">Sight</option>
                </select>
              </label>
              <label>
                Recording
                <div class="row">
                  <button type="button" id="testRecordBtn">Record</button>
                  <button type="button" id="testStopBtn" disabled>Stop</button>
                  <span id="testRecordingStatus" class="hint"></span>
                </div>
                <audio id="testPlayback" controls class="audio"></audio>
              </label>
              <label>
                Transcript
                <textarea id="testTranscriptInput" rows="4"></textarea>
              </label>
              <div class="row">
                <button type="button" id="testTranscribeBtn" class="ghost" disabled>
                  Transcribe Demo
                </button>
                <button type="button" id="testDraftBtn">Draft Captions</button>
                <button type="button" id="testClearBtn" class="ghost">Clear Test</button>
              </div>
              <div id="testCaptionForm" class="stack"></div>
              <div class="row">
                <div class="note">Caption Total: <span id="testCaptionTotal">0</span></div>
                <div class="note">Final Rating: <span id="testFinalRating">N/A</span></div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="card" id="directorCard" role="tabpanel" aria-labelledby="directorTab">
        <div class="tab-header">
          <div>
            <h2>Director Dashboard</h2>
            <div class="tab-subtitle">Complete your entry and review released packets.</div>
          </div>
          <div class="tab-header-actions">
            <span class="badge" id="directorEntryStatusBadge">Draft</span>
          </div>
        </div>
        <div class="panel director-summary" id="directorSummary">
          <div class="director-summary-main">
            <div class="director-summary-name" id="directorSummaryName">Director</div>
            <div class="note" id="directorSummaryEmail"></div>
          </div>
          <div class="director-summary-school">
            <div class="note">School</div>
            <div class="director-summary-school-name" id="directorSummarySchool">No school attached</div>
            <div class="actions">
              <div class="row" id="directorDetachControls">
                <button type="button" id="directorDetachBtn" class="ghost">
                  Change School
                </button>
              </div>
              <button type="button" class="ghost" id="directorProfileToggleBtn">Update Profile</button>
            </div>
          </div>
        </div>
        <div class="stack">
          <div class="panel" id="directorChecklistPanel">
            <div class="readiness-header">
              <h3>Entry Readiness</h3>
              <span class="pill" id="directorReadinessPill">Draft</span>
            </div>

            <div class="readiness-summary">
              <div class="readiness-main">
                <div class="readiness-title" id="directorReadinessTitle"></div>
                <div class="readiness-meta" id="directorReadinessMeta"></div>
              </div>

              <div class="readiness-actions" id="directorReadinessActions"></div>
            </div>

            <div class="progress" aria-hidden="true">
              <div class="progress-bar" id="directorReadinessBar" style="width: 0%"></div>
            </div>

            <details class="accordion-card readiness-details" id="directorReadinessDetails">
              <summary>
                <span>View details</span>
                <span class="muted readiness-hint" id="directorReadinessDetailsHint"> </span>
              </summary>
              <ul id="directorChecklist" class="list list--compact"></ul>
            </details>
          </div>

          <div class="panel">
            <h3>School</h3>
            <div class="note" id="directorSchoolHeader">
              Selected school: <span id="directorSchoolName">No school attached</span>
            </div>
            <div class="empty" id="directorAttachGate">
              Select your school to continue.
            </div>
            <div class="row" id="directorAttachControls">
              <select id="directorAttachSelect"></select>
              <button type="button" id="directorAttachBtn">Confirm School</button>
            </div>
            <div class="note" id="directorHint"></div>
          </div>

          <div class="panel" id="directorEnsemblesSection">
            <h3>Ensembles</h3>
            <div class="actions">
              <button type="button" id="directorShowEnsembleFormBtn" class="btn--secondary">
                Create New Ensemble
              </button>
            </div>
            <form id="directorEnsembleForm" class="stack is-hidden">
              <label>
                Ensemble Name
                <input type="text" id="directorEnsembleNameInput" />
              </label>
              <div class="error" id="directorEnsembleError"></div>
              <div class="actions">
                <button type="submit">Create Ensemble</button>
                <button type="button" class="ghost" id="directorEnsembleCancelBtn">
                  Cancel
                </button>
              </div>
            </form>
            <div class="note">
              Active ensemble: <span id="directorActiveEnsembleName">None selected</span>
            </div>
            <ul id="directorEnsembleList" class="list ensembles-list"></ul>
          </div>

          <div class="panel">
            <h3>Upcoming Event</h3>
            <div class="note" id="directorEventMeta">No event selected.</div>
            <div class="actions">
              <button type="button" class="ghost" id="directorChangeEventBtn">
                Change Event
              </button>
            </div>
            <div id="directorEventPicker" class="stack is-hidden">
              <label>
                Select Event
                <select id="directorEventSelect"></select>
              </label>
              <div class="actions">
                <button type="button" id="directorSetEventBtn">Set Event</button>
              </div>
            </div>
            <div class="actions">
              <button type="button" id="directorScheduleBtn">View Event Schedule</button>
            </div>
          </div>

          <div class="panel" id="directorEntryPanel">
            <h3>Event Entry</h3>
            <div class="row">
              <div class="note">Status: <span id="directorEntryStatus">Draft</span></div>
              <div class="note" id="directorSaveStatus"></div>
              <span class="autosave-indicator" id="directorAutosaveIndicator">Autosaved</span>
            </div>
            <div class="note" id="directorEntryHint">
              Select an ensemble and event to begin.
            </div>
            <form id="directorEntryForm" class="stack">
              <label>
                Performance Grade (auto-derived from repertoire grades)
                <input type="text" id="directorPerformanceGradeInput" placeholder="Auto-derived" readonly />
              </label>
              <div class="error" id="performanceGradeError"></div>
              <details class="panel accordion-card" open>
                <summary>
                  <div>
                    <strong>Repertoire</strong>
                  </div>
                </summary>
                <div class="form-section">
                  <div id="repertoireFields" class="stack"></div>
                <div class="actions">
                  <button type="button" id="saveRepertoireBtn">Save Repertoire</button>
                  <div class="hint" id="saveRepertoireStatus"></div>
                </div>
                </div>
              </details>

              <details class="panel accordion-card">
                <summary>
                  <div>
                    <strong>Instrument Counts</strong>
                  </div>
                </summary>
                <div class="form-section">
                  <div id="instrumentationStandard" class="grid-inputs"></div>
                  <label>
                    Total Percussion
                    <input type="number" id="instrumentationTotalPercussion" min="0" value="0" />
                  </label>
                <div class="actions">
                  <button type="button" id="saveInstrumentationBtn">Save Instrument Counts</button>
                  <div class="hint" id="saveInstrumentationStatus"></div>
                </div>
                </div>
              </details>

              <details class="panel accordion-card">
                <summary>
                  <div>
                    <strong>Non-Standard Instrumentation / Notes</strong>
                  </div>
                </summary>
                <div class="form-section">
                  <div class="stack">
                    <div class="row">
                      <strong>Non-standard instrumentation</strong>
                      <button type="button" class="ghost" id="instrumentationNonStandardAddBtn">
                        Add Instrument
                      </button>
                    </div>
                    <div id="instrumentationNonStandard" class="stack"></div>
                  </div>
                  <label>
                    Notes
                    <textarea id="otherInstrumentationNotesInput" rows="3"></textarea>
                  </label>
                <div class="actions">
                  <button type="button" id="saveNonStandardBtn">Save Instrument Notes</button>
                  <div class="hint" id="saveNonStandardStatus"></div>
                </div>
                </div>
              </details>

              <details class="panel accordion-card">
                <summary>
                  <div>
                    <strong>Rule 3C Doubling</strong>
                  </div>
                </summary>
                <div class="form-section">
                  <div id="rule3cRows" class="stack"></div>
                  <label>
                    Rule 3C notes
                    <textarea id="rule3cNotesInput" rows="3"></textarea>
                  </label>
                <div class="actions">
                  <button type="button" id="saveRule3cBtn">Save Rule 3C</button>
                  <div class="hint" id="saveRule3cStatus"></div>
                </div>
                </div>
              </details>

              <details class="panel accordion-card">
                <summary>
                  <div>
                    <strong>Seating Chart</strong>
                  </div>
                </summary>
                <div class="form-section">
                  <div id="seatingRows" class="stack"></div>
                  <label>
                    Seating / setup notes
                    <textarea id="seatingNotesInput" rows="3"></textarea>
                  </label>
                <div class="actions">
                  <button type="button" id="saveSeatingBtn">Save Seating</button>
                  <div class="hint" id="saveSeatingStatus"></div>
                </div>
                </div>
              </details>

              <details class="panel accordion-card">
                <summary>
                  <div>
                    <strong>Percussion</strong>
                  </div>
                </summary>
                <div class="form-section">
                  <div id="percussionOptions" class="grid-options"></div>
                  <label>
                    Other percussion requests
                    <textarea id="percussionNotesInput" rows="3"></textarea>
                  </label>
                <div class="actions">
                  <button type="button" id="savePercussionBtn">Save Percussion</button>
                  <div class="hint" id="savePercussionStatus"></div>
                </div>
                </div>
              </details>

              <details class="panel accordion-card">
                <summary>
                  <div>
                    <strong>Lunch Buy-In</strong>
                  </div>
                </summary>
                <div class="form-section">
                  <div class="hint">
                    Each lunch includes two slices of pizza, chips/snack, and bottled water.
                  </div>
                  <label>
                    Pepperoni pizza lunch quantity
                    <input type="number" id="lunchPepperoniInput" min="0" value="0" />
                  </label>
                  <label>
                    Cheese pizza lunch quantity
                    <input type="number" id="lunchCheeseInput" min="0" value="0" />
                  </label>
                  <label>
                    Lunch notes (allergies or other info)
                    <textarea id="lunchNotesInput" rows="3"></textarea>
                  </label>
                <div class="actions">
                  <button type="button" id="saveLunchBtn">Save Lunch</button>
                  <div class="hint" id="saveLunchStatus"></div>
                </div>
                </div>
              </details>

              <div class="actions">
                <button type="button" id="directorEntryReadyBtn">Mark as Ready</button>
                <button type="button" class="ghost is-hidden" id="directorEntryUndoReadyBtn">
                  Mark as Draft
                </button>
              </div>
            </form>
          </div>

          <details class="panel accordion-card">
            <summary>
              <div>
                <strong>Results Packet</strong>
              </div>
            </summary>
            <div class="form-section">
              <div class="empty" id="directorEmpty">No results released yet.</div>
              <div id="directorPackets" class="stack"></div>
            </div>
          </details>
        </div>
      </section>

      <section class="card is-hidden" id="eventDetailPage">
        <div class="row">
          <h2 id="eventDetailTitle">Event Details</h2>
          <button type="button" class="ghost" id="eventDetailBackBtn">Back to Dashboard</button>
        </div>
        <div class="note" id="eventDetailMeta"></div>
        <div class="panel">
          <h3>Event Schedule</h3>
          <div class="empty">Schedule coming soon.</div>
        </div>
      </section>
    </main>

      <div class="modal" id="authModal" aria-hidden="true">
        <div class="modal-backdrop" id="authModalBackdrop"></div>
        <div class="modal-panel" role="dialog" aria-modal="true" aria-label="Sign in">
          <div class="modal-header">
            <h2>Sign In</h2>
            <button type="button" class="ghost" id="authModalClose">Close</button>
          </div>
          <div id="authSignInView" class="stack">
            <form id="emailForm" class="stack">
              <label>
                Email
                <input type="email" id="emailInput" required />
              </label>
              <label>
                Password
                <input type="password" id="passwordInput" required />
              </label>
              <div class="row">
                <button type="submit">Email Sign In</button>
                <button type="button" id="anonymousBtn" class="ghost">
                  Anonymous Sign In
                </button>
              </div>
              <button type="button" id="forgotPasswordBtn" class="ghost">
                Forgot password
              </button>
            </form>
            <button type="button" id="showDirectorSignupBtn" class="ghost">
              Create Director Account
            </button>
          </div>

          <div id="authDirectorView" class="stack is-hidden">
            <h3>Create Director Account</h3>
            <label>
              Email
              <input type="email" id="directorEmailInput" />
            </label>
            <label>
              Password
              <input type="password" id="directorPasswordInput" />
            </label>
            <label>
              School (required)
              <select id="directorSchoolSelect"></select>
            </label>
            <button type="button" id="directorSignupBtn">Create Director Account</button>
            <button type="button" id="backToSignInBtn" class="ghost">
              Back to Sign In
            </button>
            <div class="hint">
              Directors only. Judges are provisioned by admin. Directors can switch schools later.
            </div>
          </div>

          <div id="authAccountView" class="stack is-hidden">
            <div class="note" id="accountSummary"></div>
            <div class="row" id="modalAuthActions">
              <button type="button" id="signOutBtn" class="ghost" disabled>
                Sign Out
              </button>
            </div>
          </div>
          <div class="note" id="roleHint"></div>
        </div>
      </div>

      <div class="modal" id="sessionExpiredModal" aria-hidden="true">
        <div class="modal-backdrop" id="sessionExpiredBackdrop"></div>
        <div class="modal-panel" role="dialog" aria-modal="true" aria-label="Session expired">
          <div class="modal-header">
            <h2>Session Expired</h2>
          </div>
          <div class="stack">
            <div class="note">Session expired. Please sign in again.</div>
            <button type="button" id="sessionExpiredSignInBtn">Sign In</button>
          </div>
        </div>
      </div>

      <div class="modal" id="directorProfileModal" aria-hidden="true">
        <div class="modal-backdrop" id="directorProfileBackdrop"></div>
        <div class="modal-panel" role="dialog" aria-modal="true" aria-label="Director Profile">
          <div class="modal-header">
            <h2>Director Profile</h2>
            <button type="button" class="ghost" id="directorProfileClose">Close</button>
          </div>
          <form id="directorProfileForm" class="stack">
            <label>
              Name
              <input type="text" id="directorProfileNameInput" />
            </label>
            <label>
              NAfME Membership Number
              <input type="text" id="directorProfileNafmeNumberInput" />
            </label>
            <label>
              NAfME Membership Expiration Date
              <input type="date" id="directorProfileNafmeExpInput" />
            </label>
            <label>
              Membership Card Image
              <input type="file" id="directorProfileCardInput" accept="image/*" />
            </label>
            <div class="note" id="directorProfileCardStatus"></div>
            <img id="directorProfileCardPreview" class="profile-preview is-hidden" alt="Membership card preview" />
            <div class="row">
              <button type="submit" id="directorProfileSaveBtn">Save Profile</button>
              <button type="button" class="ghost" id="directorProfileCancelBtn">Cancel</button>
            </div>
          </form>
        </div>
      </div>

    <script src="/shared/grade1-lookup.js"></script>
    <script type="module" src="/app.js"></script>
  </body>
</html>
